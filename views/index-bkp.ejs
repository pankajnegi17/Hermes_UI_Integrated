<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    <%=title%>
  </title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@1.1.1/dist/gridstack.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <link rel="stylesheet" href="/stylesheets/hermes.css" />
  <link href="/stylesheets/zoom_custom_ui_index.css" rel="stylesheet">

  <!--Chat Widget links starts-->
  <meta charset="utf-8" />
  <link rel="icon" href="/users/zoom_chat_widget/favicon.ico" />
  <link rel="stylesheet" href="style.css" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="apple-touch-icon" href="logo192.png" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="manifest" href="/users/zoom_chat_widget/manifest.json" /> 
  <link href="/users/zoom_chat_widget/static/css/2.5676cb48.chunk.css" rel="stylesheet">
  <link href="/users/zoom_chat_widget/static/css/main.3b33fc7f.chunk.css" rel="stylesheet">

</head>

<body style="overflow-y: scroll;">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top"
    style="background-color:#000 !important; margin-left:25px; margin-right: 25px;">
    <a class="navbar-brand" href="#" style="    margin-left: 20px;">Zoom Integration Demo</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse">
      <ul class="navbar-nav mr-auto">
        <!-- <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li> -->
      </ul>

    </div>
  </nav>

  <main role="main" class="container-fluid" style="margin-top: 5px;">

    <div class="grid-stack grid-wrapper" data-gs-animate="true">
      <div id="chat-grid" style="z-index:99999" class="grid-stack-item" data-gs-x="0" data-gs-y="0" data-gs-width="4"
        data-gs-height="8" data-gs-no-move="yes" data-gs-no-resize="true">
        <div class="grid-stack-item-content">
          <div class="card border-zero" style="min-height: 100%;">
            <div class="card-body">
              <div id="chatbot-root" style="height:100%;"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="zoom-grid" class="grid-stack-item active" data-gs-x="4" data-gs-y="0" data-gs-width="8"
        data-gs-height="8" data-gs-no-move="yes" data-gs-no-resize="true">
        <div class="grid-stack-item-content">
          <div id="zoomContainer" class="card active" style="min-height: 100%;">
            <div class="card-header" style="background: url('https://www.rkmarblesindia.com/public/product_images/final_product/Absolute-Black-Granite.jpg');
            height: 50px;">
              <div class="row">
                <div class="col-8">
                  <h4 style="color: white;
                  font-size: 19px;
                  font-weight: bold;">Video Conferencing UI</h4>
                </div>
                <div class="col-4 text-right">
                  <button class="btn btn-primary" onclick="showNewMeetingDialog();">Start Meeting</button>
                  <div id="meeting-id-container" class="d-none">Meeting ID: <span id="meeting-id-text"></span></div>
                </div>
              </div>
            </div>
            <div class="card-body" style="background-image: linear-gradient(to bottom right, #6a6f74, #0e121e); ">
              <iframe id="meeting-frame" src="about:blank" frameborder="0" style="width:100%; height: 100%;"
                allow="camera;microphone"></iframe>
            </div>
          </div>

          <div id="modalContainer" class="card inactive" style="min-height: 100%;">
            <div class="card-body">
              <div id="chatbot-modal"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal -->
  <div style="z-index:5555" class="modal fade" id="newMeetingDialog" tabindex="-1" role="dialog"
    aria-labelledby="newMeetingDialogLabel">

    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="newMeetingDialogLabel">Start New Meeting</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="topic">Topic</label>
              <input type="text" class="form-control" id="topic" placeholder="Topic of the meeting" required />
            </div>
            <div class="form-group">
              <label for="agenda">Agenda</label>
              <input type="text" class="form-control" id="agenda" placeholder="Agenda of the meeting" />
            </div>
            <div class="form-group">
              <label for="participants">Attendees</label>
              <div class="form-control-plaintext">
                <select id="participants" class="select2" multiple="multiple" style="width: 100%" required>
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="startMeeting();">Start Meeting</button>
        </div>
      </div>
    </div>
  </div>

  <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/gridstack@1.1.1/dist/gridstack.all.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      var grid = GridStack.init({
        cell_height: 80,
        vertical_margin: 10
      });

      $('.select2').select2({
        data: contacts,
        tags: true
      });

      $("#newMeetingDialog").modal({
        show: false
      });

    });

    function showNewMeetingDialog() {
      $("#meeting-frame").attr('src', 'about:blank');
      $("#topic").val('');
      $("#agenda").val('');
      $("#participants").val('');
      $("#newMeetingDialog").modal('show');
    }

    function startMeeting() {
      var meetingInfo = {
        topic: $("#topic").val(),
        agenda: $("#agenda").val(),
        participants: $("#participants").val()
      };

      $.post('/init_meeting', meetingInfo, (joinUrl) => {
        console.log(joinUrl)
        $("#meeting-frame").attr('src', joinUrl);
        $("#topic").val('');
        $("#agenda").val('');
        $("#participants").val('');
        $('#newMeetingDialog').modal('hide');
      });
    }

    var contacts = [
      { text: "Animikh Roy <animikh.roy@botaiml.com>", id: "animikh.roy@botaiml.com" },
      { text: "Ashutosh Kumar <ashutoshkumar@integramicro.com>", id: "ashutoshkumar@integramicro.com" },
      { text: "Ashwin Shankar <ashwins@integramicro.com>", id: "ashwins@integramicro.com" },
      { text: "Pankaj Negi <pankajnegi@integramicro.com>", id: "pankajnegi@integramicro.com" },
      { text: "Rajesh Jansale <rajeshj@botaiml.com>", id: "rajeshj@botaiml.com" },
      { text: "Shashank M <shashankm@integramicro.com>", id: "shashankm@integramicro.com" },
      { text: "Sonali Vedaraju <sonaliv@botaiml.com>", id: "sonaliv@botaiml.com" },
    ];
  </script>



  <!--Chat bot widget JS files starts-->
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="login_portal"></div>
  <!-- <script>!function (e) { function t(t) { for (var n, l, i = t[0], a = t[1], c = t[2], p = 0, s = []; p < i.length; p++)l = i[p], Object.prototype.hasOwnProperty.call(o, l) && o[l] && s.push(o[l][0]), o[l] = 0; for (n in a) Object.prototype.hasOwnProperty.call(a, n) && (e[n] = a[n]); for (f && f(t); s.length;)s.shift()(); return u.push.apply(u, c || []), r() } function r() { for (var e, t = 0; t < u.length; t++) { for (var r = u[t], n = !0, i = 1; i < r.length; i++) { var a = r[i]; 0 !== o[a] && (n = !1) } n && (u.splice(t--, 1), e = l(l.s = r[0])) } return e } var n = {}, o = { 1: 0 }, u = []; function l(t) { if (n[t]) return n[t].exports; var r = n[t] = { i: t, l: !1, exports: {} }; return e[t].call(r.exports, r, r.exports, l), r.l = !0, r.exports } l.m = e, l.c = n, l.d = function (e, t, r) { l.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, l.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, l.t = function (e, t) { if (1 & t && (e = l(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (l.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var n in e) l.d(r, n, function (t) { return e[t] }.bind(null, n)); return r }, l.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return l.d(t, "a", t), t }, l.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, l.p = "/zoom_chat_widget/"; var i = this.webpackJsonpclient = this.webpackJsonpclient || [], a = i.push.bind(i); i.push = t, i = i.slice(); for (var c = 0; c < i.length; c++)t(i[c]); var f = a; r() }([])</script>
  <script src="/zoom_chat_widget/static/js/2.b34ae528.chunk.js"></script>
  <script src="/zoom_chat_widget/static/js/main.acdbfd76.chunk.js"></script> -->
  <script>!function (e) { function t(t) { for (var n, l, i = t[0], a = t[1], c = t[2], p = 0, s = []; p < i.length; p++)l = i[p], Object.prototype.hasOwnProperty.call(o, l) && o[l] && s.push(o[l][0]), o[l] = 0; for (n in a) Object.prototype.hasOwnProperty.call(a, n) && (e[n] = a[n]); for (f && f(t); s.length;)s.shift()(); return u.push.apply(u, c || []), r() } function r() { for (var e, t = 0; t < u.length; t++) { for (var r = u[t], n = !0, i = 1; i < r.length; i++) { var a = r[i]; 0 !== o[a] && (n = !1) } n && (u.splice(t--, 1), e = l(l.s = r[0])) } return e } var n = {}, o = { 1: 0 }, u = []; function l(t) { if (n[t]) return n[t].exports; var r = n[t] = { i: t, l: !1, exports: {} }; return e[t].call(r.exports, r, r.exports, l), r.l = !0, r.exports } l.m = e, l.c = n, l.d = function (e, t, r) { l.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, l.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, l.t = function (e, t) { if (1 & t && (e = l(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (l.r(r), Object.defineProperty(r, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var n in e) l.d(r, n, function (t) { return e[t] }.bind(null, n)); return r }, l.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return l.d(t, "a", t), t }, l.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, l.p = "/users/zoom_chat_widget/"; var i = this.webpackJsonpclient = this.webpackJsonpclient || [], a = i.push.bind(i); i.push = t, i = i.slice(); for (var c = 0; c < i.length; c++)t(i[c]); var f = a; r() }([])</script>
  <script src="/users/zoom_chat_widget/static/js/2.8a897fda.chunk.js"></script>
  <script src="/users/zoom_chat_widget/static/js/main.99ba6b88.chunk.js"></script>
  <!--Chat bot widget JS files ends-->
  <script>
    $(document).ready(()=>{
      function toggleBot() {
      if ($('#modalContainer').hasClass("active")) {
        $('#modalContainer').removeClass("active");
        $('#modalContainer').addClass('inactive');
        $('#zoomContainer').removeClass("inactive");
        $('#zoomContainer').addClass('active');
      }

      else {
        if ($('#chatbot-modal').html() != "") {
          $('#zoomContainer').removeClass("active");
          $('#zoomContainer').addClass('inactive');
          $('#modalContainer').removeClass("inactive");
          $('#modalContainer').addClass('active');
        }
        else {
        }
      }
    }
    $('#zoom_switch_bot').click(function () {
      toggleBot()
    })

    $('#modal_switch_zoom').click(function () {
      toggleBot()
    })

    $('#modal_switch_human').click(function () {
      toggleBot()
    })

    $('#zoom_switch_human').click(function () {
      toggleBot()
    })

    $('#chatbot-modal').bind('DOMSubtreeModified', function (e) {
      debugger
      if (e.target.innerHTML.length < 0) {
        alert(e.target.innerHTML.length < 0)
        $('#modalContainer').removeClass("active");
        $('#modalContainer').addClass('inactive');
        $('#zoomContainer').removeClass("inactive");
        $('#zoomContainer').addClass('active');
      }
    })


    $('body').on('DOMSubtreeModified', '#chatbot-modal', function(e){ 
      if (e.target.innerHTML.length <= 0) { 
        $('#modalContainer').removeClass("active");
        $('#modalContainer').addClass('inactive');
        $('#zoomContainer').removeClass("inactive");
        $('#zoomContainer').addClass('active');
      }
});

  

    })
    

    
  </script>

</body>

</html>